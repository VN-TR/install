#!/bin/bash

#---Automatically Generated from template 'bash' wrote by @aliben---
# @Copyright (C) 2018 All rights reserved.
# @file: install_ros.bash
# @author: aliben.develop@gmail.com
# @created_date: 2018-11-06 14:33:45
# @last_modified_date: 2018-11-08 08:23:48
# @brief: TODO
# @details: TODO
#---***********************************************---


#---Variables
CREATED_TIME=`date '+%Y-%m-%d %H:%M:%S'`
CREATED_YEAR=`date '+%Y'`

#---Shell Command
# change ubuntu mirrors

mkdir -p ~/visionnav/log

sudo mv /etc/apt/sources.list /etc/apt/sources.list.bak
sudo cp sources.list /etc/apt/sources.list
#sudo add-apt-repository "https://mirrors.tuna.tsinghua.edu.cn/ubuntu $(lsb_release -cs) stable"

sudo apt-get update
sudo apt-get install -f -y
#sudo apt udgrade

sudo apt-get install -y \
python-rosinstall \
python-rosinstall-generator \
python-wstool \
build-essential \
vim \
ctags \
libopencv-* \
libncurses5-dev \
libgnome2-dev \
libgnomeui-dev \
libgtk2.0-dev \
libatk1.0-dev \
libbonoboui2-dev \
libcairo2-dev \
libx11-dev \
libxpm-dev \
libxt-dev \
python-dev \
python3-dev \
ruby-dev \
lua5.3 \
lua5.3-dev \
ssh \
qt5-default \
qtmultimedia5-dev 

sudo apt-get --fix-broken install -y

#sudo sh -c 'echo "deb http://packages.ros.org/ros/ubuntu $(lsb_release -sc) main" > /etc/apt/sources.list.d/ros-latest.list'
#sudo sh -c '. /etc/lsb-release && echo "deb http://mirrors.ustc.edu.cn/ros/ubuntu/ $DISTRIB_CODENAME main" > /etc/apt/sources.list.d/ros-latest.list
sudo sh -c '. /etc/lsb-release && echo "deb http://mirrors.tuna.tsinghua.edu.cn/ros/ubuntu/ $DISTRIB_CODENAME main" > /etc/apt/sources.list.d/ros-latest.list'

sudo apt-key adv --keyserver hkp://ha.pool.sks-keyservers.net:80 --recv-key 421C365BD9FF1F717815A3895523BAEEB01FA116
sudo apt-get update
sudo apt-get -y install ros-melodic-desktop-full \
                    ros-melodic-map* \
                    ros-melodic-joy* \
                    ros-melodic-tf*  \
		    ros-melodic-serial


sudo rosdep init
rosdep update
#echo "source /opt/ros/melodic/setup.bash" >> ~/.bashrc
#echo "source $HOME/catkin_ws/devel_isolated/setup.bash" >> ~/.bashrc
#echo "source $HOME/catkin_ws/devel/setup.bash" >> ~/.bashrc

source /opt/ros/melodic/setup.bash
#git clone https://github.com/vim/vim.git
#cd vim
#./configure --with-features=huge \
#            --enable-multibyte \
#            --enable-rubyinterp=yes \
#            --enable-pythoninterp=yes \
#            --with-python-config-dir=/usr/lib/python2.7/config \ # pay attention here check directory correct
#            --enable-python3interp=yes \
#            --with-python3-config-dir=/usr/lib/python3.7/config \
#            --enable-perlinterp=yes \
#            --enable-luainterp=yes \
#            --enable-gui=gtk2 \
#            --enable-cscope \
#            --prefix=/usr/local
#sudo make install

# install qt
#cd ~/Downloads
#wget http://download.qt.io/official_releases/qt/5.9/5.9.8/qt-opensource-linux-x64-5.9.8.run
#sudo chmod +x qt-opensource-linux-x64-5.9.8.run
#./qt-opensource-linux-x64-5.9.8.run
#echo "export QTDIR=~/Qt5.9.8/5.9.8/gcc_64" >> ~/.bashrc
#nmmmmmmmj-====================================================================j, mmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmsource ~/.bashrc

# setup serial port
sudo usermod -a -G dialout $USER
sudo chmod 666 /dev/ttyS0
sudo chmod 666 /dev/ttyS1
# upgrade all
# sudo apt update
# sudo apt upgrade
sudo apt-get --fix-broken install -y

